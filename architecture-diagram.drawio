<mxfile host="app.diagrams.net" modified="2024-10-30T12:00:00.000Z" agent="5.0" version="22.0.0" etag="architecture" type="device">
  <diagram name="FX Rates Architecture" id="fx-rates-architecture">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="FX Rates System - Global Distribution Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="800" height="40" as="geometry" />
        </mxCell>

        <!-- Global Partners Layer -->
        <mxCell id="partners-box" value="Global Partners" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="200" y="80" width="1200" height="100" as="geometry" />
        </mxCell>

        <mxCell id="partner1" value="Europe&#xa;Partners" style="shape=mxgraph.azure.users;fillColor=#7FBA42;strokeColor=none;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="300" y="120" width="50" height="50" as="geometry" />
        </mxCell>

        <mxCell id="partner2" value="Asia&#xa;Partners" style="shape=mxgraph.azure.users;fillColor=#7FBA42;strokeColor=none;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="550" y="120" width="50" height="50" as="geometry" />
        </mxCell>

        <mxCell id="partner3" value="Americas&#xa;Partners" style="shape=mxgraph.azure.users;fillColor=#7FBA42;strokeColor=none;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="800" y="120" width="50" height="50" as="geometry" />
        </mxCell>

        <mxCell id="partner4" value="Africa&#xa;Partners" style="shape=mxgraph.azure.users;fillColor=#7FBA42;strokeColor=none;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1050" y="120" width="50" height="50" as="geometry" />
        </mxCell>

        <!-- Azure Front Door -->
        <mxCell id="frontdoor" value="Azure Front Door&#xa;(Global Load Balancing)" style="shape=mxgraph.azure.azure_front_door;fillColor=#0078D7;strokeColor=none;fontSize=14;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="700" y="220" width="80" height="80" as="geometry" />
        </mxCell>

        <!-- Arrows from partners to front door -->
        <mxCell id="arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;strokeWidth=2;" edge="1" parent="1" source="partners-box" target="frontdoor">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Regional Deployments -->
        <mxCell id="region1-box" value="West Europe Region" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="100" y="350" width="350" height="500" as="geometry" />
        </mxCell>

        <mxCell id="region2-box" value="East US Region" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="550" y="350" width="350" height="500" as="geometry" />
        </mxCell>

        <mxCell id="region3-box" value="Southeast Asia Region" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="1000" y="350" width="350" height="500" as="geometry" />
        </mxCell>

        <!-- Inside Region 2 (East US) - Detailed view -->

        <!-- AKS Cluster -->
        <mxCell id="aks" value="Azure Kubernetes Service (AKS)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="570" y="390" width="310" height="350" as="geometry" />
        </mxCell>

        <!-- Microservices -->
        <mxCell id="api-service" value="FX Rates API&#xa;(Port 8080)&#xa;REST endpoints" style="shape=mxgraph.azure.virtual_machine;fillColor=#0078D7;strokeColor=none;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="590" y="440" width="80" height="70" as="geometry" />
        </mxCell>

        <mxCell id="websocket-service" value="WebSocket&#xa;Service&#xa;(Port 8082)" style="shape=mxgraph.azure.virtual_machine;fillColor=#0078D7;strokeColor=none;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="710" y="440" width="80" height="70" as="geometry" />
        </mxCell>

        <mxCell id="ingestion-service" value="Rate&#xa;Ingestion&#xa;(Port 8081)" style="shape=mxgraph.azure.virtual_machine;fillColor=#0078D7;strokeColor=none;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="590" y="550" width="80" height="70" as="geometry" />
        </mxCell>

        <!-- HPA -->
        <mxCell id="hpa" value="HPA + KEDA&#xa;Auto-scaling&#xa;(2-20 pods)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="710" y="550" width="80" height="70" as="geometry" />
        </mxCell>

        <!-- Redis Cache -->
        <mxCell id="redis" value="Azure Cache&#xa;for Redis&#xa;(5s TTL)" style="shape=mxgraph.azure.redis_cache;fillColor=#C72C48;strokeColor=none;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="590" y="660" width="80" height="70" as="geometry" />
        </mxCell>

        <!-- External Providers -->
        <mxCell id="providers-box" value="External FX Data Providers" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="100" y="900" width="800" height="100" as="geometry" />
        </mxCell>

        <mxCell id="alphavantage" value="Alpha&#xa;Vantage" style="shape=cylinder;fillColor=#FF6B6B;strokeColor=none;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="200" y="940" width="60" height="50" as="geometry" />
        </mxCell>

        <mxCell id="bloomberg" value="Bloomberg" style="shape=cylinder;fillColor=#FF6B6B;strokeColor=none;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="350" y="940" width="60" height="50" as="geometry" />
        </mxCell>

        <mxCell id="reuters" value="Reuters" style="shape=cylinder;fillColor=#FF6B6B;strokeColor=none;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="500" y="940" width="60" height="50" as="geometry" />
        </mxCell>

        <!-- Cosmos DB -->
        <mxCell id="cosmosdb" value="Azure Cosmos DB&#xa;(Serverless)&#xa;Multi-region" style="shape=mxgraph.azure.cosmosdb;fillColor=#00BCF2;strokeColor=none;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1050" y="900" width="80" height="80" as="geometry" />
        </mxCell>

        <!-- Event Hubs -->
        <mxCell id="eventhub" value="Azure Event Hubs&#xa;(Standard)&#xa;fx-rates-updates" style="shape=mxgraph.azure.event_hub;fillColor=#00BCF2;strokeColor=none;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="1200" y="900" width="80" height="80" as="geometry" />
        </mxCell>

        <!-- Arrows -->
        <mxCell id="arrow-provider-ingestion" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#FF6B6B;" edge="1" parent="1" source="alphavantage" target="ingestion-service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow-ingestion-cosmos" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#00BCF2;" edge="1" parent="1" source="ingestion-service" target="cosmosdb">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow-ingestion-eventhub" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#00BCF2;" edge="1" parent="1" source="ingestion-service" target="eventhub">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow-api-redis" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#C72C48;" edge="1" parent="1" source="api-service" target="redis">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <mxCell id="arrow-redis-cosmos" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#00BCF2;dashed=1;" edge="1" parent="1" source="redis" target="cosmosdb">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="700" y="750" as="sourcePoint" />
            <mxPoint x="1050" y="900" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow-eventhub-websocket" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#00BCF2;" edge="1" parent="1" source="eventhub" target="websocket-service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Application Insights -->
        <mxCell id="appinsights" value="Application&#xa;Insights&#xa;Monitoring" style="shape=mxgraph.azure.application_insights;fillColor=#7FBA42;strokeColor=none;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1350" y="500" width="80" height="80" as="geometry" />
        </mxCell>

        <!-- Key Vault -->
        <mxCell id="keyvault" value="Azure&#xa;Key Vault&#xa;Secrets" style="shape=mxgraph.azure.key_vault;fillColor=#FFB900;strokeColor=none;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1350" y="650" width="80" height="80" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-box" value="Legend" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=14;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="50" y="1050" width="350" height="120" as="geometry" />
        </mxCell>

        <mxCell id="legend-text" value="• Solid lines: Synchronous calls&#xa;• Dashed lines: Async/Cache fallback&#xa;• Each region: Full stack deployment&#xa;• Auto-scales: 2-20 pods per service&#xa;• Latency: &lt;5ms (cache), &lt;50ms (DB)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="60" y="1080" width="330" height="80" as="geometry" />
        </mxCell>

        <!-- Metrics Box -->
        <mxCell id="metrics-box" value="Key Metrics" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="450" y="1050" width="450" height="120" as="geometry" />
        </mxCell>

        <mxCell id="metrics-text" value="Throughput: 10,000 req/s per region&#xa;WebSocket Connections: 100,000 concurrent&#xa;Cache Hit Rate: 95%+&#xa;Latency P95: &lt;50ms&#xa;Data Freshness: 0-10 seconds&#xa;Availability: 99.95% SLA" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="460" y="1080" width="430" height="80" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
